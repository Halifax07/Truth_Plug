# 页面段落真实性验证插件项目报告

## 1. 项目介绍

本项目是一个浏览器扩展插件，名为"页面段落真实性验证插件"，主要功能是验证网页内容的真实性和可靠性。该插件能够自动分析当前浏览页面的文本内容，将其划分为多个段落，并通过调用Coze API对每个段落的真实性进行评分和标注。

### 1.1 主要功能

- 自动分析当前网页内容并划分段落
- 调用Coze API验证每个段落的真实性
- 为每个段落提供真实性评分（0-100分）
- 显示段落与官方信息源的对比详情
- 提供段落真实性的解释说明
- 在网页上直观显示段落评分结果

### 1.2 应用场景

该插件适用于以下场景：
- 新闻阅读时快速判断内容真实性
- 学术研究中验证网络资料可靠性
- 信息筛选过程中识别虚假或误导性内容
- 媒体监测和事实核查工作

## 2. 开发技术与环境

### 2.1 技术栈

- **前端技术**：
  - HTML5
  - CSS3
  - JavaScript (ES6+)
  - Chrome Extension API

- **后端服务**：
  - Coze API（AI内容分析服务）
  - RESTful API

- **开发工具**：
  - Visual Studio Code
  - Chrome DevTools
  - Git版本控制

### 2.2 项目结构

```
项目根目录/
├── manifest.json           # 扩展清单文件
├── docs.md                 # API文档和说明
├── background/             # 后台脚本
│   └── service_worker.js   # 服务工作线程
├── content_scripts/        # 内容脚本
│   ├── main.js             # 主要内容处理脚本
│   └── styles.css          # 样式文件
├── popup/                  # 弹出窗口
│   ├── popup.html          # 弹出窗口HTML
│   └── popup.js            # 弹出窗口脚本
└── icons/                  # 图标资源
    ├── icon16.png
    ├── icon48.png
    └── icon128.png
```

### 2.3 核心API

插件主要使用Coze API进行内容分析，API调用示例：

```javascript
// Coze API调用
const response = await fetch(COZE_CHAT_API_URL, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${COZE_API_KEY}`
  },
  body: JSON.stringify({
    bot_id: BOT_ID,
    query: currentUrl,
    response_mode: "streaming"
  })
});
```

## 3. 运行过程

### 3.1 插件安装

1. 在Chrome浏览器中打开扩展管理页面 (chrome://extensions/)
2. 启用"开发者模式"
3. 点击"加载已解压的扩展程序"按钮
4. 选择项目根目录进行安装

### 3.2 使用流程

1. **启动插件**：
   - 点击浏览器工具栏中的插件图标，打开弹出窗口

2. **分析页面**：
   - 在弹出窗口中点击"分析当前页面"按钮
   - 插件开始处理当前网页内容

3. **内容处理过程**：
   - 插件通过content_script提取当前页面的文本内容
   - 将页面URL和内容发送到Coze API进行分析
   - Coze API将内容划分为段落并与官方信息源进行比对
   - 为每个段落生成真实性评分和说明

4. **结果展示**：
   - 在网页上为每个段落添加真实性评分标注
   - 在弹出窗口中显示详细的分析结果
   - 用户可查看每个段落的评分、比对详情和解释说明

### 3.3 关键功能实现

#### 3.3.1 页面内容分析

```javascript
async function analyzePageContent(url) {
  try {
    console.log("开始分析页面内容, URL:", url);
    
    // 构建请求体
    const response = await fetch(COZE_CHAT_API_URL, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${COZE_API_KEY}`
      },
      body: JSON.stringify({
        bot_id: BOT_ID,
        query: url,
        response_mode: "streaming"
      })
    });
    
    if (!response.ok) {
      throw new Error(`API请求失败: ${response.status} ${response.statusText}`);
    }
    
    // 处理响应数据
    const data = await response.json();
    return processApiResponse(data);
  } catch (error) {
    console.error("分析页面内容时出错:", error);
    throw error;
  }
}
```

#### 3.3.2 结果显示

```javascript
function displayScoresOnPage(scoredParagraphs) {
  // 遍历所有段落
  scoredParagraphs.forEach(paragraph => {
    // 查找匹配的DOM元素
    const matchingElements = findParagraphElements(paragraph.text);
    
    if (matchingElements.length > 0) {
      // 为匹配的元素添加评分标注
      matchingElements.forEach(element => {
        addScoreBadge(element, paragraph.score);
      });
    }
  });
}

function addScoreBadge(element, score) {
  // 创建评分标签
  const badge = document.createElement('div');
  badge.className = 'truth-score-badge';
  badge.textContent = score;
  
  // 根据评分设置颜色
  if (score >= 80) {
    badge.classList.add('high-score');
  } else if (score >= 50) {
    badge.classList.add('medium-score');
  } else {
    badge.classList.add('low-score');
  }
  
  // 添加到页面元素
  element.appendChild(badge);
}
```

## 4. 项目总结

### 4.1 技术亮点

1. **无缝集成**：插件能够无缝集成到浏览器环境中，不影响用户正常浏览体验
2. **实时分析**：通过高效的API调用实现网页内容的实时分析和评分
3. **直观展示**：采用清晰的视觉标注方式，让用户直观了解内容真实性
4. **AI驱动**：利用Coze API的人工智能能力进行深度内容分析和比对
5. **错误处理**：完善的错误处理机制，确保插件在各种情况下的稳定运行

### 4.2 应用价值

1. **信息筛选**：帮助用户快速识别网页内容中的虚假或误导性信息
2. **提升媒体素养**：培养用户对网络信息的批判性思维
3. **减少误导**：降低虚假信息传播的可能性
4. **提高效率**：为事实核查工作提供自动化工具，提高工作效率

### 4.3 未来改进方向

1. **支持更多语言**：扩展对多语言内容的分析能力
2. **优化分析算法**：提高内容分析的准确性和效率
3. **增加用户自定义**：允许用户设置自己关注的信息源和验证标准
4. **添加历史记录**：保存用户的分析历史，方便回顾和比较
5. **扩展平台支持**：开发Firefox、Edge等其他浏览器的版本

### 4.4 结论

"页面段落真实性验证插件"是一个基于浏览器扩展的实用工具，通过AI技术帮助用户验证网页内容的真实性。在当今信息爆炸的时代，该插件能够有效帮助用户筛选信息，提高信息获取的质量和效率。通过持续优化和功能扩展，该插件有望在信息验证和事实核查领域发挥更大的作用。 